(()=>{function e(t){document.getElementById(`buybtn${t}`).innerHTML="Using...",fetch("/api/useskin?id="+t).then((e=>e.json())).then((n=>{n.success?(document.getElementById(`buybtn${t}`).innerHTML="Current skin",document.getElementById(`buybtn${t}`).onclick="",document.getElementById(`buybtn${current}`).innerHTML="Use",previous=current,document.getElementById(`buybtn${current}`).onclick=()=>{e(previous)},current=t):(alertmodal("",n.error),document.getElementById(`buybtn${t}`).innerHTML="Use")}))}loggedIn?Array.from(document.getElementsByClassName("skin")).forEach((t=>{skins.includes(parseInt(t.dataset.id))?(document.getElementById(`buybtn${t.dataset.id}`).innerHTML="Use",document.getElementById(`buybtn${t.dataset.id}`).onclick=()=>{e(t.dataset.id)}):document.getElementById(`buybtn${t.dataset.id}`).onclick=()=>{var n;n=t.dataset.id,document.getElementById(`buybtn${n}`).innerHTML="Buying...",fetch("/api/buy?id="+n).then((e=>e.json())).then((t=>{t.success?(document.getElementById(`buybtn${n}`).innerHTML="Use",document.getElementById(`buybtn${n}`).onclick=()=>{e(n)},document.getElementById("balance").innerHTML=t.gold):(alertmodal("",t.error),document.getElementById(`buybtn${n}`).innerHTML="Buy")}))},parseInt(t.dataset.id)==current&&(document.getElementById(`buybtn${t.dataset.id}`).innerHTML="Current skin",document.getElementById(`buybtn${t.dataset.id}`).onclick="")})):Array.from(document.getElementsByClassName("skin")).forEach((e=>{document.getElementById(`buybtn${e.dataset.id}`).disabled=!0}))})();